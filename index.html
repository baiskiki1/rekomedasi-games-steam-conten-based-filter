<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistem rekomendasi game | content based filtering</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap");

      :root {
        --primary: #3b82f6;
        --accent: #8b5cf6;
        --bg: #020617;
      }

      body {
        font-family: "Plus Jakarta Sans", sans-serif;
        background-color: var(--bg);
        color: #ffffff;
        overflow: hidden;
      }

      /* Background Animated Gradient */
      .mesh-gradient {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.15) 0px, transparent 50%), radial-gradient(at 100% 100%, rgba(139, 92, 246, 0.15) 0px, transparent 50%);
        z-index: -1;
      }

      .glass-sidebar {
        background: rgba(15, 23, 42, 0.6);
        backdrop-filter: blur(40px);
        border-right: 1px solid rgba(255, 255, 255, 0.05);
      }

      .nav-link {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }

      .nav-link.active::before {
        content: "";
        position: absolute;
        left: -20px;
        width: 4px;
        height: 100%;
        background: var(--primary);
        border-radius: 0 4px 4px 0;
        box-shadow: 0 0 15px var(--primary);
      }

      .game-card {
        background: rgba(30, 41, 59, 0.4);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 28px;
        transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .game-card:hover {
        transform: scale(1.03) translateY(-5px);
        border-color: var(--primary);
        background: rgba(30, 41, 59, 0.7);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      }

      .score-badge {
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .btn-gradient {
        background: linear-gradient(135deg, var(--primary), var(--accent));
        box-shadow: 0 10px 20px rgba(59, 130, 246, 0.2);
      }

      .btn-gradient:hover {
        box-shadow: 0 15px 30px rgba(59, 130, 246, 0.4);
        filter: brightness(1.1);
      }

      .search-bar {
        background: rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      /* Shimmer Animation */
      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }
      .loading-shimmer {
        background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }
    </style>
  </head>
  <body class="flex h-screen">
    <div class="mesh-gradient"></div>

    <aside class="w-72 glass-sidebar flex flex-col p-8">
      <div class="flex items-center gap-4 mb-16">
        <div class="w-12 h-12 btn-gradient rounded-2xl flex items-center justify-center text-xl shadow-2xl">
          <i class="fas fa-microchip"></i>
        </div>
        <div>
          <h1 class="text-xl font-extrabold tracking-tighter">Sistem rekomendasi game steam <span class="text-blue-500">AI</span></h1>
          <p class="text-[8px] font-bold text-gray-500 tracking-[3px] uppercase">content based filtering</p>
        </div>
      </div>

      <nav class="space-y-6 flex-1">
        <div class="space-y-2">
          <p class="text-[10px] font-black text-gray-500 uppercase tracking-widest px-4 mb-4">Library</p>
          <button onclick="getPopular()" class="nav-link w-full flex items-center gap-4 p-4 rounded-2xl hover:bg-white/5 group">
            <i class="fas fa-bolt text-gray-500 group-hover:text-yellow-400 transition-colors"></i>
            <span class="font-semibold text-gray-400 group-hover:text-white">Trending</span>
          </button>
          <button onclick="window.location.reload()" class="nav-link active w-full flex items-center gap-4 p-4 rounded-2xl bg-blue-600/10 text-white shadow-sm">
            <i class="fas fa-compass text-blue-500"></i>
            <span class="font-semibold">Discovery</span>
          </button>
        </div>
      </nav>

      <div class="pt-8 border-t border-white/5">
        <div class="p-4 bg-white/5 rounded-2xl flex items-center gap-4">
          <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500"></div>
          <div>
            <p class="text-xs font-bold">User</p>
            <p class="text-[10px] text-gray-500">Pro Member</p>
          </div>
        </div>
      </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0">
      <header class="p-8 flex items-center gap-6">
        <div class="search-bar flex-1 flex items-center px-6 py-1 rounded-2xl focus-within:ring-2 ring-blue-500/50 transition-all">
          <i class="fas fa-search text-gray-500 mr-4"></i>
          <input id="gameInput" type="text" placeholder="What do you want to play today?" class="bg-transparent border-none w-full py-4 outline-none text-sm font-semibold placeholder:text-gray-600" />
        </div>
        <button onclick="getRecommendation()" class="btn-gradient px-10 py-4 rounded-2xl font-bold text-sm tracking-wide">ANALYZE AI</button>
      </header>

      <div class="flex-1 overflow-y-auto px-12">
        <div class="mb-12 mt-4 relative">
          <h2 id="mainTitle" class="text-6xl font-black mb-4 tracking-tighter">Ready to <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400">Play?</span></h2>
          <p id="mainSub" class="text-gray-400 text-xl font-medium max-w-2xl leading-relaxed">Gunakan algoritma Cosine Similarity untuk menemukan petualangan Anda berikutnya.</p>
        </div>

        <div id="loader" class="hidden grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8">
          <div class="h-80 rounded-[28px] loading-shimmer"></div>
          <div class="h-80 rounded-[28px] loading-shimmer"></div>
          <div class="h-80 rounded-[28px] loading-shimmer"></div>
          <div class="h-80 rounded-[28px] loading-shimmer"></div>
        </div>

        <div id="resultGrid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-8 pb-12"></div>
      </div>
    </main>

    <script>
      const API_BASE = "http://127.0.0.1:8001";

      async function loadUI(endpoint, title, sub) {
        const grid = document.getElementById("resultGrid");
        const loader = document.getElementById("loader");
        grid.innerHTML = "";
        loader.classList.remove("hidden");
        document.getElementById("mainTitle").innerHTML = title;
        document.getElementById("mainSub").innerText = sub;

        try {
          const res = await fetch(`${API_BASE}${endpoint}`);
          const data = await res.json();
          loader.classList.add("hidden");

          if (data.error) {
            grid.innerHTML = `<div class="col-span-full py-20 text-center"><p class="text-red-400 font-bold">${data.error}</p></div>`;
            return;
          }

          data.forEach((game, index) => {
            const match = (game.Score * 100).toFixed(1);
            const steamUrl = `https://store.steampowered.com/app/${game.AppID}`;

            grid.innerHTML += `
                        <div class="game-card group flex flex-col" style="animation: fadeInUp 0.5s ease forwards ${index * 0.1}s; opacity: 0;">
                            <div class="relative p-4">
                                <div class="relative h-48 rounded-2xl overflow-hidden shadow-2xl">
                                    <img src="${game["Header image"]}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                                    <div class="absolute top-4 left-4 score-badge px-3 py-1.5 rounded-full">
                                        <p class="text-[10px] font-black text-blue-400 tracking-tighter italic">
                                            <i class="fas fa-brain mr-1"></i> ${match}% MATCH
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="px-6 pb-8 flex-1 flex flex-col">
                                <p class="text-[9px] font-bold text-gray-500 uppercase tracking-[3px] mb-2">${game.Genres.split(",")[0]}</p>
                                <h3 class="text-lg font-extrabold text-white mb-6 line-clamp-1 group-hover:text-blue-400 transition-colors">${game.Name}</h3>
                                <div class="mt-auto">
                                    <a href="${steamUrl}" target="_blank" class="block w-full py-4 rounded-2xl text-center text-[10px] font-black bg-white/5 hover:bg-blue-600 transition-all border border-white/10 uppercase tracking-widest">
                                        Steam Details <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
          });
        } catch (e) {
          loader.classList.add("hidden");
          alert("Server Error");
        }
      }

      function getRecommendation() {
        const val = document.getElementById("gameInput").value;
        if (!val) return;
        loadUI(`/recommend/${encodeURIComponent(val)}`, `Matches for <span class="text-blue-500">${val}</span>`, `Analisis mendalam terhadap jutaan titik data metadata.`);
      }

      function getPopular() {
        loadUI(`/popular`, `Trending <span class="text-blue-500">Games</span>`, `Daftar game yang paling relevan untuk memulai eksplorasi Anda.`);
      }

      window.onload = getPopular;
    </script>

    <style>
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </body>
</html>

